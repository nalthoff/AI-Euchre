<div class="game-board">
  <!-- Trump indicator in top-right -->
  <div class="trump-indicator" *ngIf="gameSvc.trump">
    Trump: {{ suitSymbols[gameSvc.trump] }}
  </div>
  <!-- 1) Trump selection, until trump is chosen -->
  <div class="trump-selection" *ngIf="!gameSvc.trump && gameSvc.currentKitty && !gameSvc.awaitingDiscard">
      <div class="order-indicator">
    <p *ngIf="gameSvc.currentOrderPlayer === 0">
      Your turn to decide trump
    </p>
    <p *ngIf="gameSvc.currentOrderPlayer !== 0">
      Player {{ gameSvc.currentOrderPlayer + 1 }} is decidingâ€¦
    </p>
  </div>
    <h3>Trump Up:</h3>
    <div class="card trump-card">
      <span class="rank">{{ gameSvc.currentKitty.rank }}</span>
      <span class="suit" [ngClass]="{
          'red-suit':
            gameSvc.currentKitty.suit === 'hearts' ||
            gameSvc.currentKitty.suit === 'diamonds'
        }">
        {{ suitSymbols[gameSvc.currentKitty.suit] }}
      </span>
    </div>
    <div class="trump-actions">
      <button (click)="onOrderAction()">Order Up</button>
      <button (click)="onPassAction()">Pass</button>
    </div>
  </div>

  <!-- 2) AI seats, once trump is set -->
  <div class="seat top" *ngIf="gameSvc.currentHands.length > 0">
    <span class="dealer-indicator" *ngIf="gameSvc.dealerIndex === 2">Dealer</span>
    <h4>player 3</h4>
    <div class="cards">
      <div class="card-back" *ngFor="let _ of gameSvc.currentHands[2]">ðŸ‚ </div>
    </div>
  </div>
  <div class="seat left" *ngIf="gameSvc.currentHands.length > 0">
    <span class="dealer-indicator" *ngIf="gameSvc.dealerIndex === 1">Dealer</span>
    <h4>Player 2</h4>
    <div class="cards">
      <div class="card-back" *ngFor="let _ of gameSvc.currentHands[1]">ðŸ‚ </div>
    </div>
  </div>
  <div class="seat right" *ngIf="gameSvc.currentHands.length > 0">
    <span class="dealer-indicator" *ngIf="gameSvc.dealerIndex === 3">Dealer</span>
    <h4>Player 4</h4>
    <div class="cards">
      <div class="card-back" *ngFor="let _ of gameSvc.currentHands[3]">ðŸ‚ </div>
    </div>
  </div>

  <!-- 3) Trick area in center -->
  <!-- <div class="trick-area main" *ngIf="currentTrick.length"> -->
  <div class="trick-area main" *ngIf="currentTrick.length" (click)="onAdvanceTrick()">
    <h4>Current Trick</h4>
    <div class="cards">
      <div class="card-played" *ngFor="let play of currentTrick">
        <span class="seat-label">P{{ play.player + 1 }}</span>
        <span class="card" [ngClass]="{'played-card': true}">
          {{ play.card.rank }}
          <span class="suit" [ngClass]="{
              'red-suit': play.card.suit==='hearts'||play.card.suit==='diamonds'
            }">
            {{ suitSymbols[play.card.suit] }}
          </span>
        </span>
      </div>
    </div>
    <p class="advance-hint">Click here to advance to the next trick</p>
  </div>

  <!-- 4) Human hand at bottom; clickable cards -->
  <div class="seat bottom" *ngIf="gameSvc.currentHands.length > 0">
    <span class="dealer-indicator" *ngIf="gameSvc.dealerIndex === 0">Dealer</span>
    <h4>Your Hand</h4>
    <p *ngIf="gameSvc.awaitingDiscard" class="discard-hint">
      Click a card below to discard
    </p>
    <div class="cards">
      <!-- <div class="card" *ngFor="let card of gameSvc.currentHands[0]" (click)="onCardClick(card)"> -->
      <div class="card" *ngFor="let card of gameSvc.currentHands[0]"
        (click)="gameSvc.awaitingDiscard ? onDiscardCard(card) : onCardClick(card)"
        [class.discarding]="gameSvc.awaitingDiscard">

        <span class="rank">{{ card.rank }}</span>
        <span class="suit" [ngClass]="{
            'red-suit': card.suit==='hearts'||card.suit==='diamonds'
          }">
          {{ suitSymbols[card.suit] }}
        </span>
      </div>
    </div>
  </div>
  <!-- Restart button once all cards have been played -->
  <div class="restart-container" *ngIf="gameSvc.currentHands[0]?.length === 0">
    <button class="new-game-btn" (click)="restart()">New Game</button>
  </div>

  <!-- 5) Game log panel -->
  <div class="game-log-panel" *ngIf="gameSvc.currentHands.length > 0 && gameSvc.currentHands[0] && gameSvc.currentHands[0].length > 0">
    <h4>Game Log</h4>
    <ul class="game-log-list">
      <li *ngFor="let entry of gameLog.slice(-10)">{{ entry }}</li>
    </ul>
  </div>

  <!-- Additional trump selection UI for 2nd round -->
  <div class="trump-selection" *ngIf="!gameSvc.trump && !gameSvc.awaitingDiscard && gameSvc.orderRound === 2 && gameSvc.currentOrderPlayer === 0">
    <div class="order-indicator">
      <p>Your turn to choose trump (2nd round)</p>
    </div>
    <div class="trump-actions">
      <button *ngFor="let suit of availableSuits" (click)="onOrderSecondRound(suit)">
        Choose {{ suit | titlecase }}
      </button>
      <button (click)="onPassAction()">Pass</button>
    </div>
  </div>
</div>